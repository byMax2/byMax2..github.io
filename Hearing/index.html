<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="style.css"> 
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<link rel="shortcut icon" type="image/x-icon" href="https://img00.deviantart.net/5319/i/2012/158/8/f/_almost__rarity__s_crown_by_vectorshy-d52luxi.png">
		<title>Hörtest</title>
			<script src="js/sweetalert.min.js"></script>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
		<script src="js/push.min.js"></script>
		<script defer src="./libs/p5.js"></script>
		<script defer src="./libs/p5s.js"></script>
	</head>
	<body><br>
		<header>
			<h1>Hörtest<br></h1>
		</header>
		<script>
			swal({
				icon: "warning",
				title: "Hörschäden",
				text: "Dieser Test könnte möglicherweise ungewollte Hörschäden verursachen, ich übernehme keine Haftung!",
			});
		</script>
		<script>
			Push.create("Hörschäden", {
				body: "Dieser Test könnte möglicherweise ungewollte Hörschäden verursachen, ich übernehme keine Haftung!",
				timeout: 4000,
				onClick: function () {
					window.focus();
					this.close();
				}
			});
		</script>
		<div class="shows" style="background-color:#fff9ca;">
			<h3>Frequenz:</h3><br>
			<div class="showmainbox">
				<div class="showbox">
					<div id="buttons">
						<button id="play"><i class="fa fa-play" aria-hidden="true"></i></button>
					</div>
				</div>
				<div class="showbox">
					<div id="input">
						<input id="fq" type="number"> Hz
					</div>
				</div>
				<div class="showbox">
					<div id="buttons">
						<button id="pause"><i class="fa fa-pause" aria-hidden="true"></i></button>
					</div>
				</div>
			</div>	
		</div>
		<footer>
			© Maximilain Lude, 2019
		</footer>
	</body>
	<script>
	let sound;
	let play;	
		$(window).ready(function () {
			sound = new p5.Oscillator();
			sound.setType('sine');
			sound.amp(0);	
			sound.start();
			$('#fq').val(300);
			sound.freq(parseFloat($('#fq').val()));
			play = false;
		});
		$('#fq').on('input', function() {
			sound.freq(parseFloat($('#fq').val()));
		});		
		$('#play').on('click', function() {
			sound.amp(0.7, 0.15);
		});
		$('#pause').on('click', function() {
			sound.amp(0, 0.15);
		});
	</script>
</html>