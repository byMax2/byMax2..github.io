<!DOCTYPE html>
<html>
    <head>
        <title>Arbeitszeitzähler</title>
    </head>
    <header>
        <h1>Arbeitszeitzähler</h1>
    </header>
    <body>
        <div id="input">
            <h3>Eingabe:</h3>
            <table>
                <tr>
                  <th>Stunden </th>
                  <th> Minuten</th>
                </tr>
                <tr>
                  <td><select id="hrs"></select></td>
                  <td><select id="mins"></select></td>
                </tr>
            </table>
            <br>
            <span>Mittagspause:</span>
            <select id="breakmins" value="30">
            </select>
            <span> Minuten</span>
        </div>
        <div id="output">
            <h3 >Ausgabe:</h3>
            <h2 id="outputtext"></h2>
            <h2 id="countdown"></h2>
        </div>
    </body>
    <footer>
    </footer>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script>
        $(document).ready(function () {

            function addMinutes(date, minutes) {
                return new Date(date.getTime() + minutes*60000);
            }

            function addHours(date, hours) {
                return addMinutes(date, hours*60);
            }

            var go;
            function berechne() {
                var come = new Date();
                come.setHours($("#hrs").val());
                come.setMinutes($("#mins").val());
                come.setSeconds(0);
                come.setMilliseconds(0);
                var breaktime = $("#breakmins").val();
                go = addHours(addMinutes(addMinutes(come, breaktime), 48), 7);
                $("#outputtext").text(go.getHours() + ":" + go.getMinutes() + " Uhr");
            }

            var str = "";
            for (var i = 5; i <= 20; i++) 
                str += '<option value="' + i + '"' + (i == 6 ? 'selected="selected"' : "") + '>' + i + '</option>';
            $("#hrs").html(str).change(berechne);
            str = "";

            for (var i = 0; i < 60; i++) 
                str += '<option value="' + i + '">' + i + '</option>';
            $("#mins").html(str).change(berechne);
            str = "";
            
            for (var i = 0; i <= 120; i++) 
                str += '<option value="' + i + '"' + (i == 30 ? 'selected="selected"' : "") + '>' + i + '</option>';
            
            $("#breakmins").html(str).change(berechne);
            str = "";
            berechne();
            updateCountdown();

            function updateCountdown() {
                var now = new Date().getTime();

                var distance = go - now;

                var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                var seconds = Math.floor((distance % (1000 * 60)) / 1000);

                $("#countdown").text(hours + ":"
                + minutes + ":" + seconds);
                if (distance < 1000) {
                    clearInterval(x);
                    $("#countdown").text("Zeit Abgelaufen");
                }
            }
            var x = setInterval(updateCountdown, 250);
        });
    </script>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
        }
    </style>
</html>
